<?xml version="1.0" encoding="UTF-8"?>

<templates>
    <t t-extend="hr_timesheet_sheet.WeeklyTimesheet">
        <t t-jquery="tr[t-foreach='widget.accounts']">
            jQuery(this).children().wrapAll('<t t-if="widget.task_names" />')
        </t>
        <!-- Add a task column -->
        <t t-jquery="th.oe_timesheet_first_col" t-operation="after">
            <th class="oe_timesheet_task_col">Task</th>
        </t>
        <!-- add our table cells and data attributes -->
        <t t-jquery="td.oe_timesheet_weekly_account" t-operation="after">
            <td class="oe_timesheet_weekly_task">
                <a href="javascript:void(0)" t-att-data-task-id="JSON.stringify(account.task_id)"><t t-esc="widget.task_names[account.task_id]" /></a>
            </td>
        </t>
        <t t-jquery="td[t-att-data-account-total]">
            jQuery(this).attr('t-att-data-task', 'account.task_id || 0');
        </t>
        <t t-jquery="input.oe_timesheet_weekly_input">
            jQuery(this).attr('t-att-data-task', 'account.task_id || 0');
        </t>
        <t t-jquery="input + span.oe_timesheet_weekly_box">
            jQuery(this).attr('t-att-data-task', 'account.task_id || 0');
        </t>
        <!-- Add cell in the last tr before the first element -->
        <t t-jquery="tr.oe_timesheet_total > td:first-child">
            jQuery(this).attr('colspan', 2);
        </t>
    </t>
</templates>
